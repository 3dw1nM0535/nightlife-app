{"version":3,"sources":["../server/index.js"],"names":["connect","MONGO_URI","app","use","static","resolve","json","port","process","env","PORT","get","req","res","sendFile","server","createServer","listen"],"mappings":";;AAGA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAcA;;;;AACA;;;;AACA;;;;AAEA;;;;;;AAEA;;AAEA;AACA;AACA;;;AAtBA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAYA,mBAASA,OAAT,CAAiB,uBAAWC,SAA5B;;AAEA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AA5CA;AACA;AACA;AA2CA,IAAMC,MAAM,wBAAZ;;AAEA;AACA;AACA;AACAA,IAAIC,GAAJ,CAAQ,kBAAQC,MAAR,CAAe,eAAKC,OAAL,CAAa,OAAb,CAAf,CAAR;;AAEA;AACA;AACA;AACAH,IAAIC,GAAJ,CAAQ,qBAAWG,IAAX,EAAR;;AAEA;AACA;AACA;AACA,IAAMC,OAAOC,QAAQC,GAAR,CAAYC,IAAzB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;AASA;AACA;AACA;AACAR,IAAIS,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,MAAIC,QAAJ,CAAa,eAAKT,OAAL,CAAa,SAAb,EAAwB,YAAxB,CAAb;AACD,CAFD;;AAIA;AACA;AACA;AACAH,IAAIC,GAAJ,CAAQ,WAAR;AACAD,IAAIC,GAAJ,CAAQ,WAAR;AACAD,IAAIC,GAAJ,CAAQ,WAAR;;AAEA;AACA;AACA;AACA,IAAMY,SAAS,eAAKC,YAAL,CAAkBd,GAAlB,CAAf;;AAEA;AACA;AACA;AACAa,OAAOE,MAAP,CAAcV,IAAd","file":"index.js","sourcesContent":["///////////////////\n//Server modules //\n///////////////////\nimport path from \"path\";\nimport express from \"express\";\nimport http from \"http\";\nimport bodyParser from \"body-parser\";\nimport mongoose from \"mongoose\";\n\n///////////////////////////////////\n//Webpack HRM & Compiler modules //\n///////////////////////////////////\n\n// import webpack from \"webpack\";\n// import webpackHotMiddleware from \"webpack-hot-middleware\";\n// import webpackDevMiddleware from \"webpack-dev-middleware\";\n// import config from \"../webpack.config\";\n\n//////////////////\n//Route modules //\n//////////////////\nimport bar from \"./routes/bar/bar\";\nimport user from \"./routes/user/user\";\nimport auth from \"./routes/user/auth\";\n\nimport privateEnv from \"./config/private_keys\";\n\n// config.plugins.push(new webpack.HotModuleReplacementPlugin());\n\n////////////////////////\n//Connect to database //\n////////////////////////\nmongoose.connect(privateEnv.MONGO_URI);\n\n//////////////////////////////////////////////\n//Certificate options for HTTPS development //\n//////////////////////////////////////////////\n/*const certOptions = {\n  pfx: fs.readFileSync(path.resolve(\"config/localhost.pfx\")),\n  passphrase: privateEnv.PASSPHRASE,\n};*/\n\n////////////////////////\n//Init express module //\n////////////////////////\nconst app = express();\n\n///////////////////////////\n//Static file middleware //\n///////////////////////////\napp.use(express.static(path.resolve(\"build\")));\n\n////////////////////////\n//Parse req-body data //\n////////////////////////\napp.use(bodyParser.json());\n\n////////////////\n//Config PORT //\n////////////////\nconst port = process.env.PORT;\n\n///////////////////////////\n//Webpack compiler setup //\n///////////////////////////\n// const compiler = webpack(config);\n\n///////////////////////////\n//Webpack HRM Middleware //\n///////////////////////////\n// app.use(webpackHotMiddleware(compiler));\n\n///////////////////////////\n//Webpack dev Middleware //\n///////////////////////////\n\n/*\napp.use(webpackDevMiddleware(compiler, {\n  noInfo: true,\n  hot: true,\n  historyApiFallback: true,\n  publicPath: config.output.publicPath,\n}));\n*/\n\n//////////////////////\n//Any route handler //\n//////////////////////\napp.get(\"*\", (req, res) => {\n  res.sendFile(path.resolve(\"./build\", \"index.html\"));\n});\n\n/////////////////\n//Mount routes //\n/////////////////\napp.use(\"/api/bars\", bar);\napp.use(\"/api/user\", user);\napp.use(\"/api/auth\", auth);\n\n////////////////////////////\n//Init server over HTTPS //\n////////////////////////////\nconst server = http.createServer(app);\n\n///////////////////////////\n//Listen for connections //\n///////////////////////////\nserver.listen(port);\n"]}